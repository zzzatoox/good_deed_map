{% extends 'registration/auth_base.html' %}
{% load i18n static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/captcha.css' %}">
{% endblock %}

{% block title %}Повторная отправка подтверждения - {{ block.super }}{% endblock %}

{% block icon_alt %}✉️{% endblock %}

{% block form_title %}Повторная отправка подтверждения{% endblock %}

{% block form_content %}
<form method="post" class="space-y-6">
    {% csrf_token %}
    
    {% if form.non_field_errors %}
    <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-3 rounded dark:bg-red-900/30 dark:text-red-200">
        {% for error in form.non_field_errors %}
        <p>{{ error }}</p>
        {% endfor %}
    </div>
    {% endif %}
    
    <div>
        <label for="{{ form.email.id_for_label }}" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            {{ form.email.label }}
        </label>
        {{ form.email }}
        {% if form.email.errors %}
        <div class="mt-1 text-red-200 text-sm bg-red-500/20 border border-red-400 rounded p-2">
            {% for error in form.email.errors %}
            <p>❌ {{ error }}</p>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
        <p class="text-sm text-blue-800 dark:text-blue-300">
            Укажите email, который вы использовали при регистрации. Если аккаунт не подтвержден, на него будет отправлена новая ссылка для подтверждения.
        </p>
    </div>

    <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            {{ form.captcha.label }}
        </label>
        <div class="flex items-center gap-3">
            {{ form.captcha }}
        </div>
        {% if form.captcha.help_text %}
        <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">{{ form.captcha.help_text }}</p>
        {% endif %}
        {% if form.captcha.errors %}
        <div class="mt-1 text-red-200 text-sm bg-red-500/20 border border-red-400 rounded p-2">
            {% for error in form.captcha.errors %}
            <p>❌ {{ error }}</p>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <button type="submit"
            class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white 
                   font-medium py-3 px-6 rounded-lg
                   hover:from-blue-600 hover:to-purple-700 
                   focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
                   transform transition duration-200 hover:scale-[1.02]">
        Отправить письмо
    </button>
</form>

<div class="mt-6 text-center">
    <a href="{% url 'login' %}" 
       class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 
              transition duration-200">
        Вернуться ко входу
    </a>
</div>
{% endblock %}
