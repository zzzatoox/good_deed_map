{% extends 'base.html' %}
{% load static %}
{% block header %}{% endblock %}
{% block footer %}{% endblock %}

{# Страница ошибки 404 в стиле React app #}
{% block title %}Страница не найдена - 404{% endblock %}

{% block extra_css %}
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Inter', sans-serif;
  }

  /* Animations from React app */
  @keyframes fade-in-scale {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }
  .animate-fade-in-scale { 
    animation: fade-in-scale 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards; 
  }

  @keyframes fade-in-up {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-up { 
    animation: fade-in-up 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
  }

  @keyframes float {
    0% { transform: translateY(0px) translateX(0px) rotate(0deg); }
    50% { transform: translateY(-20px) translateX(10px) rotate(5deg); }
    100% { transform: translateY(0px) translateX(0px) rotate(0deg); }
  }
  .animate-float {
    animation-name: float;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
  }

  /* Brand colors */
  .bg-brand-green { background-color: #56C02B; }
  .bg-brand-green-dark { background-color: #4F8B3C; }
  .text-brand-green { color: #56C02B; }
  .text-brand-green-dark { color: #4F8B3C; }
  .hover\:bg-brand-green-dark:hover { background-color: #4F8B3C; }
  .hover\:text-brand-green-dark:hover { color: #4F8B3C; }
  .focus\:ring-brand-green:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(86, 192, 43, 0.3);
  }

  .shadow-inner-sm { box-shadow: inset 0 1px 0 rgba(255,255,255,0.6); }

  /* Theme toggle icons */
  .theme-toggle .icon-moon { display: none; }
  .dark .theme-toggle .icon-moon { display: inline-block; }
  .dark .theme-toggle .icon-sun { display: none; }

  /* Floating icon colors */
  .text-brand-raspberry { color: #E91E63; }
  .text-brand-orange { color: #FF9800; }
  .text-brand-turquoise { color: #00BCD4; }
  .text-brand-yellow { color: #FFC107; }

  /* World map background */
  .world-map-bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    color: #cbd5e1;
  }
  .dark .world-map-bg {
    color: #334155;
  }
</style>
{% endblock %}

{% block content %}
<div class="relative h-screen w-screen flex items-center justify-center p-4 overflow-hidden">
  {# Background with world map #}
  <div class="absolute inset-0 bg-slate-200 dark:bg-slate-900">
    {# World map SVG #}
    <div class="world-map-bg">
      <svg viewBox="0 0 1000 500" preserveAspectRatio="xMidYMid slice" class="w-full h-full">
        <path d="M72,254 C79,258 87,258 91,253 C95,248 93,242 93,238 C93,234 98,229 101,229 C104,229 107,232 107,235 C107,238 108,242 110,245 C112,248 118,249 120,246 C122,243 123,239 126,238 C129,237 132,239 135,241 C138,243 140,241 140,238 C140,235 144,232 147,232 C150,232 152,235 152,239 C152,243 154,249 157,251 C160,253 165,251 167,248 C169,245 171,240 174,238 C177,236 181,237 184,240 C187,243 189,242 190,239 C191,236 195,234 198,235 C201,236 202,239 202,243 C202,247 203,251 207,253 C211,255 215,253 217,249 C219,245 220,240 223,238 C226,236 229,238 232,241 C235,244 236,242 236,239 C236,236 238,233 241,233 C244,233 247,235 248,238 C249,241 249,245 251,248 C253,251 257,251 259,248 C261,245 261,240 264,238 C267,236 270,238 273,241 C276,244 278,243 278,240 C278,237 282,235 285,235 C288,235 290,238 290,242 C290,246 292,250 295,252 C298,254 302,253 304,250 C306,247 307,241 310,239 C313,237 317,239 320,242 C323,245 324,243 324,240 C324,237 326,234 329,234 C332,234 335,236 336,239 C337,242 337,246 339,249 C341,252 345,252 347,249 C349,246 349,241 352,239 C355,237 358,239 361,242 C364,245 366,244 366,241 C366,238 370,236 373,236 C376,236 378,239 378,243 C378,247 380,251 383,253 C386,255 390,254 392,251 C394,248 395,242 398,240 C401,238 405,240 408,243 C411,246 412,244 412,241 C412,238 414,235 417,235 C420,235 423,237 424,240 C425,243 425,247 427,250 C429,253 433,253 435,250 C437,247 437,242 440,240 C443,238 446,240 449,243 C452,246 454,245 454,242 C454,239 458,237 461,237 C464,237 466,240 466,244 C466,248 468,252 471,254 C474,256 478,255 480,252 C482,249 483,243 486,241 C489,239 493,241 496,244 C499,247 500,245 500,242 C500,239 502,236 505,236 C508,236 511,238 512,241 C513,244 513,248 515,251 C517,254 521,254 523,251 C525,248 525,243 528,241 C531,239 534,241 537,244 C540,247 542,246 542,243 C542,240 546,238 549,238 C552,238 554,241 554,245 C554,249 556,253 559,255 C562,257 566,256 568,253 C570,250 571,244 574,242 C577,240 581,242 584,245 C587,248 588,246 588,243 C588,240 590,237 593,237 C596,237 599,239 600,242 C601,245 601,249 603,252 C605,255 609,255 611,252 C613,249 613,244 616,242 C619,240 622,242 625,245 C628,248 630,247 630,244 C630,241 634,239 637,239 C640,239 642,242 642,246 C642,250 644,254 647,256 C650,258 654,257 656,254 C658,251 659,245 662,243 C665,241 669,243 672,246 C675,249 676,247 676,244 C676,241 678,238 681,238 C684,238 687,240 688,243 C689,246 689,250 691,253 C693,256 697,256 699,253 C701,250 701,245 704,243 C707,241 710,243 713,246 C716,249 718,248 718,245 C718,242 722,240 725,240 C728,240 730,243 730,247 C730,251 732,255 735,257 C738,259 742,258 744,255 C746,252 747,246 750,244 C753,242 757,244 760,247 C763,250 764,248 764,245 C764,242 766,239 769,239 C772,239 775,241 776,244 C777,247 777,251 779,254 C781,257 785,257 787,254 C789,251 789,246 792,244 C795,242 798,244 798,247" fill="currentColor" />
      </svg>
    </div>
    <div class="absolute inset-0 bg-gradient-to-t from-slate-50/50 to-transparent dark:from-slate-900/50"></div>
    
    {# Floating Icons #}
    <div class="absolute inset-0 overflow-hidden">
      {# Search Icon #}
      <div class="absolute transform-gpu w-16 h-16 text-brand-raspberry opacity-20 dark:opacity-10 filter blur-sm animate-float" 
           style="top: 15%; left: 10%; animation-duration: 15s; animation-delay: 0s;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" clip-rule="evenodd" />
        </svg>
      </div>
      
      {# Question Mark Icon #}
      <div class="absolute transform-gpu w-20 h-20 text-brand-orange opacity-20 dark:opacity-10 filter blur-sm animate-float" 
           style="top: 30%; left: 85%; animation-duration: 20s; animation-delay: -5s;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 01-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 01-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 01-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584zM12 18a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd" />
        </svg>
      </div>
      
      {# Globe Icon #}
      <div class="absolute transform-gpu w-24 h-24 text-brand-green opacity-20 dark:opacity-10 filter blur-sm animate-float" 
           style="top: 70%; left: 5%; animation-duration: 18s; animation-delay: -10s;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
          <path d="M21.721 12.752a9.711 9.711 0 00-.945-5.003 12.754 12.754 0 01-4.339 2.708 18.991 18.991 0 01-.214 4.772 17.165 17.165 0 005.498-2.477zM14.634 15.55a17.324 17.324 0 00.332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 00.332 4.647 17.385 17.385 0 005.268 0zM9.772 17.119a18.963 18.963 0 004.456 0A17.182 17.182 0 0112 21.724a17.18 17.18 0 01-2.228-4.605zM7.777 15.23a18.87 18.87 0 01-.214-4.774 12.753 12.753 0 01-4.34-2.708 9.711 9.711 0 00-.944 5.004 17.165 17.165 0 005.498 2.477zM21.356 14.752a9.765 9.765 0 01-7.478 6.817 18.64 18.64 0 001.988-4.718 18.627 18.627 0 005.49-2.098zM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 001.988 4.718 9.765 9.765 0 01-7.478-6.816zM13.878 2.43a9.755 9.755 0 016.116 3.986 11.267 11.267 0 01-3.746 2.504 18.63 18.63 0 00-2.37-6.49zM12 2.276a17.152 17.152 0 012.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0112 2.276zM10.122 2.43a18.629 18.629 0 00-2.37 6.49 11.266 11.266 0 01-3.746-2.504 9.754 9.754 0 016.116-3.985z" />
        </svg>
      </div>
      
      {# Exclamation Icon #}
      <div class="absolute transform-gpu w-14 h-14 text-brand-turquoise opacity-20 dark:opacity-10 filter blur-sm animate-float" 
           style="top: 80%; left: 90%; animation-duration: 22s; animation-delay: -2s;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd" />
        </svg>
      </div>
      
      {# Map Icon #}
      <div class="absolute transform-gpu w-12 h-12 text-brand-yellow opacity-20 dark:opacity-10 filter blur-sm animate-float" 
           style="top: 5%; left: 60%; animation-duration: 16s; animation-delay: -8s;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd" d="M8.161 2.58a1.875 1.875 0 011.678 0l4.993 2.498c.106.052.213.1.32.145.896.375 1.848.562 2.848.562.44 0 .854-.054 1.25-.16a.75.75 0 01.967.66v11.063a2.875 2.875 0 01-1.492 2.52l-4.993 2.498a1.875 1.875 0 01-1.678 0l-4.993-2.498A2.875 2.875 0 014.75 17.348V6.285a.75.75 0 01.967-.66c.396.106.81.16 1.25.16 1 0 1.952-.187 2.848-.562.107-.045.214-.093.32-.145l4.993-2.498zM12 4.5l-4.993 2.498a8.124 8.124 0 01-1.757.75v9.6l4.993 2.498a.375.375 0 00.336 0l4.993-2.498V7.748a8.124 8.124 0 01-1.757-.75L12 4.5z" clip-rule="evenodd" />
        </svg>
      </div>
    </div>
  </div>

  {# Error Panel - solid white #}
  <div class="w-full max-w-md bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 shadow-2xl rounded-2xl p-8 transform transition-all duration-300 animate-fade-in-scale relative z-10">
    {# Theme toggle button #}
    <button type="button" class="theme-toggle absolute top-4 right-4 w-10 h-10 flex items-center justify-center bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-all transform hover:scale-105 focus:outline-none cursor-pointer" aria-label="Toggle theme">
      <svg class="icon-sun w-5 h-5 text-slate-600 dark:text-slate-300" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 4V2m0 20v-2M4.22 4.22L2.81 2.81M21.19 21.19l-1.41-1.41M4 12H2m20 0h-2M4.22 19.78l-1.41 1.41M21.19 2.81l-1.41 1.41M12 8a4 4 0 100 8 4 4 0 000-8z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      <svg class="icon-moon w-5 h-5 text-slate-600 dark:text-slate-300" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/></svg>
    </button>
    
    <div class="flex flex-col items-center text-center mb-8 animate-fade-in-up" style="animation-delay: 100ms;">
      <div class="bg-red-500 p-4 rounded-full shadow-inner-sm mb-4 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 01-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 01-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 01-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584zM12 18a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd" />
        </svg>
      </div>
      <h1 class="text-6xl font-extrabold text-slate-800 dark:text-slate-100 mb-2">404</h1>
      <h2 class="text-2xl font-bold text-slate-800 dark:text-slate-100 mb-3">Страница не найдена</h2>
      <p class="text-slate-600 dark:text-slate-300 mt-2 max-w-sm">
        К сожалению, страница, которую вы ищете, не существует или была перемещена.
      </p>
    </div>

    <div class="space-y-4 animate-fade-in-up" style="animation-delay: 200ms;">
      <a
        href="/"
        class="w-full flex items-center justify-center gap-2 bg-brand-green text-white font-semibold px-4 py-3 rounded-lg shadow-md hover:bg-brand-green-dark transition-colors transform hover:scale-105"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
          <path d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z" />
          <path d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z" />
        </svg>
        <span>Вернуться на главную</span>
      </a>
    </div>

    {# Additional info #}
    <div class="text-center mt-6 animate-fade-in-up" style="animation-delay: 300ms;">
      <p class="text-sm text-slate-600 dark:text-slate-400">
        Нужна помощь?
        <a href="/" class="font-semibold text-brand-green hover:text-brand-green-dark dark:hover:text-brand-green transition-colors">
          Свяжитесь с нами
        </a>
      </p>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  // Theme toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    function applyTheme(isDark){
      if(isDark) document.documentElement.classList.add('dark');
      else document.documentElement.classList.remove('dark');
      try{ localStorage.setItem('theme', isDark ? 'dark' : 'light'); }catch(e){}
      document.querySelectorAll('.theme-toggle').forEach(btn => {
        const sun = btn.querySelector('.icon-sun');
        const moon = btn.querySelector('.icon-moon');
        if(sun) sun.style.setProperty('display', isDark ? 'none' : 'inline-block', 'important');
        if(moon) moon.style.setProperty('display', isDark ? 'inline-block' : 'none', 'important');
      });
    }
    const savedTheme = (()=>{ try{ return localStorage.getItem('theme'); }catch(e){ return null; }})();
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const startDark = (savedTheme === 'dark') || (savedTheme === null && prefersDark);
    applyTheme(startDark);
    document.querySelectorAll('.theme-toggle').forEach(btn => {
      btn.addEventListener('click', (e) => { 
        e.preventDefault();
        e.stopPropagation();
        applyTheme(!document.documentElement.classList.contains('dark')); 
      });
    });
  });
</script>
{% endblock %}